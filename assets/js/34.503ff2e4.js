(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{292:function(e,t,r){e.exports=r.p+"assets/img/image-20200409165535031.c33048a4.png"},293:function(e,t,r){e.exports=r.p+"assets/img/image-20200409164557525.2aac1c85.png"},294:function(e,t,r){e.exports=r.p+"assets/img/image-20200409165850980.03c26a10.png"},295:function(e,t,r){e.exports=r.p+"assets/img/image-20200409170048402.92b866fe.png"},296:function(e,t,r){e.exports=r.p+"assets/img/image-20200409170149793.77068c27.png"},297:function(e,t,r){e.exports=r.p+"assets/img/image-20200409170227534.dfc8d1a8.png"},298:function(e,t,r){e.exports=r.p+"assets/img/image-20200409170253807.11e2090f.png"},299:function(e,t,r){e.exports=r.p+"assets/img/image-20200409170601960.f3cab972.png"},300:function(e,t,r){e.exports=r.p+"assets/img/image-20200409171127296.cc3f549f.png"},358:function(e,t,r){"use strict";r.r(t);var s=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"eureka从0到1完整实践-下-——-基于eureka实现高可用的服务治理方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eureka从0到1完整实践-下-——-基于eureka实现高可用的服务治理方案","aria-hidden":"true"}},[this._v("#")]),this._v(" Eureka从0到1完整实践(下) —— 基于Eureka实现高可用的服务治理方案")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"前置条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前置条件","aria-hidden":"true"}},[this._v("#")]),this._v(" 前置条件")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考链接")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("本篇文章，将记录使用Eureka完成服务层面的高可用设计。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"什么是高可用？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是高可用？","aria-hidden":"true"}},[this._v("#")]),this._v(" 什么是高可用？")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("高可用HA（High Availability）是分布式系统架构设计中必须考虑的因素之一，它通常是指，通过设计减少系统不能提供服务的时间。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("常见系统，一般通过"),t("strong",[this._v("冗余")]),this._v("+"),t("strong",[this._v("自动故障转移")]),this._v("来实现系统的高可用特性。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("冗余： 同时多个系统可以同步对外提供服务。")]),this._v(" "),t("li",[this._v("自动故障转移： 当一个系统出现故障时，流量能自动转移到正常运行的系统上。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"服务注册中心集群部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务注册中心集群部署","aria-hidden":"true"}},[this._v("#")]),this._v(" 服务注册中心集群部署")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("p",[this._v("创建application-server2.yml文件")]),this._v(" "),t("p",[t("img",{attrs:{src:r(292),alt:"image-20200409165535031"}})]),this._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("server:\n  port: 8001\nspring:\n  application:\n    name: eureka-server\n  # Springboot应用启动参数\n  profiles:\n    active: server2\neureka:\n  instance:\n    # 该服务的主机名称\n    hostname: eureka-center2\n    # 服务失效时间，Eureka多长时间没收到服务的心跳操作，就剔除该服务，默认90秒\n    lease-expiration-duration-in-seconds: 90\n    # 表示eureka client发送心跳给server端的频率\n    lease-renewal-interval-in-seconds: 30\n  client:\n    # 表示是否注册，默认为true\n    register-with-eureka: true\n    # 表示是否拉取，默认为true\n    fetch-registry: true\n    # 该注册中心将会被注册到8000端口上的另一个eureka服务注册中心，它们之间的数据将会共享。\n    service-url:\n      defaultZone: http://localhost:8000/eureka/\n  server:\n    # eureka server清理无效节点的时间间隔，默认60000毫秒，即60秒\n    eviction-interval-timer-in-ms: 60000\n    # 自我保护模式（缺省为打开）\n    enable-self-preservation: true\n")])])])]),this._v(" "),t("li",[t("p",[this._v("编辑应用启动选项")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(293),alt:"image-20200409164557525"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(294),alt:"image-20200409165850980"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(295),alt:"image-20200409170048402"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("p",[this._v("启动两个服务注册中心（不分先后）")]),this._v(" "),t("p",[this._v("8000端口的服务注册中心1 已启动")]),this._v(" "),t("p",[t("img",{attrs:{src:r(296),alt:"image-20200409170149793"}})]),this._v(" "),t("p",[this._v("8001端口的服务注册中心2 已启动")]),this._v(" "),t("p",[t("img",{attrs:{src:r(297),alt:"image-20200409170227534"}})])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(298),alt:"image-20200409170253807"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(299),alt:"image-20200409170601960"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(300),alt:"image-20200409171127296"}})])}],a=r(1),i=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("p",[e._v("本项目全程使用Gradle完成构建，Gradle版本为5.4.1")]),e._v(" "),e._m(1),e._v(" "),r("ul",[r("li",[e._v("搭建基本的单点项目。"),r("a",{attrs:{href:"https://slowside45.github.io/SpringCloud/eureka.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Eureka从0到1完整实践(上) —— 基于Eureka构建最简服务治理方案"),r("OutboundLink")],1)])]),e._v(" "),r("hr"),e._v(" "),e._m(2),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959728&idx=1&sn=933227840ec8cdc35d3a33ae3fe97ec5&chksm=bd2d046c8a5a8d7a13551124af36bedf68f7a6e31f6f32828678d2adb108b86b7e08c678f22f&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("究竟啥才是互联网架构“高可用”"),r("OutboundLink")],1),e._v(" —— @58沈剑")])]),e._v(" "),e._m(3),e._v(" "),r("hr"),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),r("hr"),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),r("p",[e._v("期间，可能会出现这样的异常：")]),e._v(" "),e._m(14),e._v(" "),r("p",[e._v("这是由于服务启动时，它需要将自身注册到application.yml文件中指定的serverUrl所在的服务注册中心上，这时服务注册中心可能尚未完成启动，就会抛出这样的异常。由于eureka会定期向服务注册中心发送请求，当服务注册中心启动成功后，你将看到如下提示：")]),e._v(" "),e._m(15),e._v(" "),r("p",[e._v("这时，说明该服务已成功注册到服务中心。")]),e._v(" "),r("p",[e._v("按照以上步骤，我们在8000端口和8001端口已经启动了两个基于eureka实现的服务注册中心，eureka自动为我们构建了管理页面，访问http://localhost:8000和http://localhost:8001即可查看。")]),e._v(" "),e._m(16)])},s,!1,null,null,null);i.options.__file="eureka-plus.md";t.default=i.exports}}]);